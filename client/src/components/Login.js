import React, {useContext, useEffect, useRef, useState} from 'react';import {Box, Button, Checkbox, Container, FormControlLabel, TextField, Typography} from "@mui/material";import {useNavigate} from "react-router-dom";import http from "../plugins/http";import context from "../context/mainContext";const Login = () => {    const nav = useNavigate()    const email = useRef()    const password = useRef()    const stayLogged = useRef()    const [error, setError] = useState('')    const {setUsername, setAdmin} = useContext(context)    async function login() {        const user = {            email: email.current.value,            password: password.current.value,        }        const logged = stayLogged.current.checked        const data = await http.post(user, 'login')        if (!data.success) return setError(data.message)        logged ? await saveUser() : await loginPage()        async function saveUser() {            localStorage.setItem('secretKey', data.id)            await loginPage()        }        async function loginPage() {            setAdmin(data.admin)            setUsername(email.current.value)            setError('')            nav('/')        }    }    return (<Container maxWidth="sm" sx={{m: '100px auto', textAlign: 'center'}}>        <TextField            margin={'normal'}            id="outlined-basic"            label="Email"            variant="outlined"            fullWidth            inputRef={email}        />        <TextField            margin={'normal'}            label="Password"            type="password"            fullWidth            inputRef={password}        />        <div className='d-flex j-btw'>            <FormControlLabel control={<Checkbox inputRef={stayLogged}/>} label="Stay logged in"/>        </div>        <Button onClick={login} variant={'contained'}>login</Button>        <Box margin={4}>            {error.length !== 0 && <Typography variant={'button'}                                               sx={{                                                   backgroundColor: '#FF7272',                                                   m: 2,                                                   p: '5px 40px',                                                   borderRadius: 10                                               }}>                {error}            </Typography>}        </Box>    </Container>);};export default Login;